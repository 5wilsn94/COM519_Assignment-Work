<!DOCTYPE html>
<html lang="en">
    <head>
      <meta charset="utf-8" />
      <meta name="viewport"
        content="width=device-width, initial-scale=1"
      />
      <meta name="description" content="" />
      <title>WHSmith Complaints</title>

      <link
        rel="canonical"
        href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css"
      />

      <link
        rel="stylesheet"
        href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"
        integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z"
        crossorigin="anonymous"
      />
      <link href="css/album.css" rel="stylesheet" />      
    </head>
    <body>
        <%- include('common/header'); -%>
        <div class="container">
    
            <% if (message) {   %> 
                   <div class="row justify-content-md-center">
                     <div class="alert alert-primary" role="alert">
                           <%= message %>
                     </div>
                   </div>
             <% } %>

             <div class="row col-md-12 col-md-offset-2 custyle mx-auto">
      
              <button type="button" class="btn btn-primary" href="/create-complaint">Create a new complaint</button> 
              <h1 class="mx-auto"> Employee Complaints</h1>
            
              <table class="table table-striped custab">
              <thead>
                  <tr>
                      <th>Employee ID</th>
                      <th>Store Number</th>
                      <th>Time</th>
                      <th>Complaint Type</th>
                      <th>Description</th>
                  </tr>
          
                  <% complaints.forEach(complaint => { %>
                      <tr>
                          <td><%=  complaint.employee_id  %></td>
                          <td><%=  complaint.store_number  %></td>
                          <td><%=  complaint.time  %></td>
                          <td><%=  complaint.complaint_type  %></td>
                          <td><%=  complaint.description  %></td>
                          <td class="text-center"><a class='btn btn-info btn-xs' href="/complaints/update/<%= complaint.id %>" ><span class="glyphicon glyphicon-edit"></span> Edit</a> 
                          <a  href="/complaints/delete/<%= complaint.id %>" class="btn btn-danger btn-xs"><span class="glyphicon glyphicon-remove"></span> Del</a></td>
                      </tr>   
                   <%  
                    });
                   %>
              </thead>
              </table>
              </div>
        </div>
        <div class="row col-md-12 col-md-offset-2 custyle mx-auto">        
    
            <nav aria-label="Page navigation example">                      
           
              <ul class="pagination">
      
                <% if (currentPage === 1) { %>
                  
                  <li class="page-item disabled"><a class="page-link" href="#">First</a></li>     
                <% } %>  
                <% if (currentPage > 1) { %>
                    <li class="page-item"><a class="page-link" href="/complaints">First</a></li>
                <% } %>  
      
                  <li class="page-item"><a class="page-link" href="/complaints?page=<%= currentPage === numberOfPages ? currentPage - 10 :  currentPage + 1 %>"><%= currentPage === numberOfPages ? currentPage - 10 :  currentPage + 1 %></a></li>
                  <li class="page-item"><a class="page-link" href="/complaints?page=<%= currentPage === numberOfPages ? currentPage - 9 :  currentPage + 2 %>"><%= currentPage === numberOfPages ? currentPage - 9 :  currentPage + 2 %></a></li>
                  <li class="page-item"><a class="page-link" href="/complaints?page=<%= currentPage === numberOfPages ? currentPage - 8 :  currentPage + 3 %>"><%= currentPage === numberOfPages ? currentPage - 8 :  currentPage + 3 %></a></li>
                  <li class="page-item"><a class="page-link" href="/complaints?page=<%= currentPage === numberOfPages ? currentPage - 7 :  currentPage + 4 %>"><%= currentPage === numberOfPages ? currentPage - 7 :  currentPage + 4 %></a></li>
                  <li class="page-item"><a class="page-link" href="/complaints?page=<%= currentPage === numberOfPages ? currentPage - 6 :  currentPage + 5 %>"><%= currentPage === numberOfPages ? currentPage - 6 :  currentPage + 5 %></a></li>
                  <li class="page-item"><a class="page-link" href="/complaints?page=<%= currentPage === numberOfPages ? currentPage - 5 :  currentPage + 6 %>"><%= currentPage === numberOfPages ? currentPage - 5 :  currentPage + 6 %></a></li>
                  <li class="page-item"><a class="page-link" href="/complaints?page=<%= currentPage === numberOfPages ? currentPage - 4 :  currentPage + 7 %>"><%= currentPage === numberOfPages ? currentPage - 4 :  currentPage + 7 %></a></li>
                  <li class="page-item"><a class="page-link" href="/complaints?page=<%= currentPage === numberOfPages ? currentPage - 3 :  currentPage + 8 %>"><%= currentPage === numberOfPages ? currentPage - 3 :  currentPage + 8 %></a></li>
                  <li class="page-item"><a class="page-link" href="/complaints?page=<%= currentPage === numberOfPages ? currentPage - 2 :  currentPage + 9 %>"><%= currentPage === numberOfPages ? currentPage - 2 :  currentPage + 9 %></a></li>
                  <li class="page-item"><a class="page-link" href="/complaints?page=<%= currentPage === numberOfPages ? currentPage - 1 :  currentPage + 10 %>"><%= currentPage === numberOfPages ? currentPage - 1 :  currentPage + 10 %></a></li>
              
                <% if (currentPage === numberOfPages) { %>
                  
                  <li class="page-item disabled"><a class="page-link" href="">Last</a></li>     
                <% } %>  
                
                <% if (currentPage < numberOfPages) { %>
                    <li class="page-item"><a class="page-link" href="/complaints?page=<%= numberOfPages %>">Last</a></li>
                <% } %>  
                
                </ul>
        </nav>
          </div>
          <%- include('common/footer') -%>
        </body>
      </html>